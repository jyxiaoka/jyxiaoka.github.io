<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iOS应用查看crash日志并分析crash原因 | 宇后空知</title>
    <meta name="description" content="学如逆水行舟不进则退">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.7497f63a.css" as="style"><link rel="preload" href="/assets/js/app.47e4b453.js" as="script"><link rel="preload" href="/assets/js/3.fee66f70.js" as="script"><link rel="preload" href="/assets/js/1.2e349676.js" as="script"><link rel="preload" href="/assets/js/25.e0831a03.js" as="script"><link rel="prefetch" href="/assets/js/10.9f90277e.js"><link rel="prefetch" href="/assets/js/11.90e2f34a.js"><link rel="prefetch" href="/assets/js/12.1cb0edf3.js"><link rel="prefetch" href="/assets/js/13.a45ee461.js"><link rel="prefetch" href="/assets/js/14.3a3b5d68.js"><link rel="prefetch" href="/assets/js/15.f911bb44.js"><link rel="prefetch" href="/assets/js/16.df954c08.js"><link rel="prefetch" href="/assets/js/17.bfd77c17.js"><link rel="prefetch" href="/assets/js/18.834739ef.js"><link rel="prefetch" href="/assets/js/19.22ca494c.js"><link rel="prefetch" href="/assets/js/20.a540a5c0.js"><link rel="prefetch" href="/assets/js/21.d98dac6c.js"><link rel="prefetch" href="/assets/js/22.77c14c77.js"><link rel="prefetch" href="/assets/js/23.26cd1e0a.js"><link rel="prefetch" href="/assets/js/24.eb47cdc0.js"><link rel="prefetch" href="/assets/js/26.b1dd00a2.js"><link rel="prefetch" href="/assets/js/27.7e919e91.js"><link rel="prefetch" href="/assets/js/28.f3dd7b79.js"><link rel="prefetch" href="/assets/js/29.121521c8.js"><link rel="prefetch" href="/assets/js/30.3d0c306f.js"><link rel="prefetch" href="/assets/js/31.4b951f68.js"><link rel="prefetch" href="/assets/js/32.a581bfd3.js"><link rel="prefetch" href="/assets/js/33.81cbf059.js"><link rel="prefetch" href="/assets/js/4.83c6b290.js"><link rel="prefetch" href="/assets/js/5.5f60ea70.js"><link rel="prefetch" href="/assets/js/6.922cb1c1.js"><link rel="prefetch" href="/assets/js/7.0a40d726.js"><link rel="prefetch" href="/assets/js/8.7f591466.js"><link rel="prefetch" href="/assets/js/9.428b28b4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7497f63a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-13eca780 data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-13eca780 data-v-13eca780>宇后空知</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-13eca780 data-v-13eca780><input type="password" value="" data-v-13eca780> <span data-v-13eca780>文章已被锁!</span> <button data-v-13eca780>OK</button></label> <div class="footer" style="display:none;" data-v-13eca780 data-v-13eca780><span data-v-13eca780><i class="iconfont reco-theme" data-v-13eca780></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-13eca780>vuePress-theme-reco</a></span> <span data-v-13eca780><i class="iconfont reco-copyright" data-v-13eca780></i> <a data-v-13eca780><span data-v-13eca780>jyxiaoka</span>
            
          <span data-v-13eca780>2019 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="宇后空知" class="logo"> <span class="site-name">宇后空知</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="iconfont undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/杂谈/" class="nav-link"><i class="iconfont undefined"></i>
  杂谈
</a></li><li class="dropdown-item"><!----> <a href="/categories/移动端/" class="nav-link"><i class="iconfont undefined"></i>
  移动端
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jyxiaoka" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/52655e189f24" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    jyxiaoka
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>22</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>7</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="iconfont undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/杂谈/" class="nav-link"><i class="iconfont undefined"></i>
  杂谈
</a></li><li class="dropdown-item"><!----> <a href="/categories/移动端/" class="nav-link"><i class="iconfont undefined"></i>
  移动端
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jyxiaoka" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/52655e189f24" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>iOS应用查看crash日志并分析crash原因</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#在程序中捕获崩溃信息" class="sidebar-link">在程序中捕获崩溃信息</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#在发生崩溃的设备中获取崩溃日志" class="sidebar-link">在发生崩溃的设备中获取崩溃日志</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#通过与itunes-store同步" class="sidebar-link">通过与iTunes Store同步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#通过在xcode上获取" class="sidebar-link">通过在Xcode上获取</a></li><li class="sidebar-sub-header"><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#使用itunes-connect获取" class="sidebar-link">使用iTunes Connect获取</a></li></ul></li><li><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#符号化crash-log文件" class="sidebar-link">符号化crash log文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#使用xcode符号化crash-log文件" class="sidebar-link">使用Xcode符号化crash log文件</a></li><li class="sidebar-sub-header"><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#命令行工具symbolicatecrash" class="sidebar-link">命令行工具symbolicatecrash</a></li></ul></li><li><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#崩溃日志实例分析" class="sidebar-link">崩溃日志实例分析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html#参考文章" class="sidebar-link">参考文章</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-13eca780 data-v-4698c43e><h3 class="title" style="display:none;" data-v-13eca780 data-v-13eca780>iOS应用查看crash日志并分析crash原因</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-13eca780 data-v-13eca780><input type="password" value="" data-v-13eca780> <span data-v-13eca780>文章已被锁!</span> <button data-v-13eca780>OK</button></label> <div class="footer" style="display:none;" data-v-13eca780 data-v-13eca780><span data-v-13eca780><i class="iconfont reco-theme" data-v-13eca780></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-13eca780>vuePress-theme-reco</a></span> <span data-v-13eca780><i class="iconfont reco-copyright" data-v-13eca780></i> <a data-v-13eca780><span data-v-13eca780>jyxiaoka</span>
            
          <span data-v-13eca780>2019 - </span>
          2020
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>iOS应用查看crash日志并分析crash原因</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>jyxiaoka</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2016-11-01</span></i> <i class="iconfont reco-eye" data-v-484a899e><span id="/views/%E7%A7%BB%E5%8A%A8%E7%AB%AF/2016110101.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-484a899e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      iOS
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>为了确保我们开发的应用能够正确无误，顺利地在iOS设备上运行，我们必定会进行大量的测试工作。但是即使我们开发时做得很好了，测试时在测试设备上也没发现什么问题了，但是在真正在客户中使用时或者上架到应用商店后用户有时会抱怨应用崩溃闪退，这时我们就需要iOS崩溃日志了。大多数情况下，iOS崩溃日志会记录着应用崩溃的详尽的、有用的信息，我们通过分析崩溃日志找到问题的所在，然后解决它。</p> <h2 id="在程序中捕获崩溃信息"><a href="#在程序中捕获崩溃信息" class="header-anchor">#</a> 在程序中捕获崩溃信息</h2> <p>可以在程序中来捕获应用崩溃信息，然后将崩溃信息保存起来，发送到服务器。使用Exception可对一些常见的异常进行捕获，并对异常进行处理(捕获后发送至服务器或邮箱)，并对用户进行友好的错误提示。
使用@try、catch来捕获异常：</p> <div class="language-objc line-numbers-mode"><pre class="language-text"><code>@try {
    NSLog(@&quot;可能会抛出异常的代码&quot;);
} @catch (NSException *exception) {
    NSLog(@&quot;捕获到异常&quot;);
} @finally {
    NSLog(@&quot;最后一定会执行&quot;);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>有时候app无法避免会遇到崩溃闪退的情况，这时候我们可以在程序崩溃之前做一下错误信息的收集，然后将错误信息发送到服务器，然后开发者可在服务器上获取错误日志，然后分析崩溃原因：
在AppDelegate.m的<code>- (BOOL)application: didFinishLaunchingWithOptions:</code>方法中</p> <div class="language-objc line-numbers-mode"><pre class="language-text"><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Override point for customization after application launch.
    NSSetUncaughtExceptionHandler(&amp;UncaughtExceptionHandler);
    return YES;
}
void UncaughtExceptionHandler(NSException *exception) {
	//获取崩溃相关的信息
    NSArray *callStack = [exception callStackSymbols];
    NSString *reason = [exception reason];
    NSString *name = [exception name];
    NSString * errorStr = [NSString stringWithFormat:@&quot;========异常错误报告========\nname:%@\nreason:\n%@\ncallStackSymbols:\n%@&quot;,name,reason,[callStack componentsJoinedByString:@&quot;\n&quot;]];
 	//发送邮件到开发者邮箱
    NSMutableString *mailUrl = [NSMutableString string];
    [mailUrl appendString:@&quot;mailto:test@qq.com&quot;];
    [mailUrl appendString:@&quot;?subject=程序异常崩溃！&quot;];
    [mailUrl appendFormat:@&quot;&amp;body=%@&quot;, errorStr];
    // 打开地址
    NSString *mailPath = [mailUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:mailPath]];
    //或者将错误信息保存到文件中，然后将文件上传到服务器
    NSData* data = [errorStr dataUsingEncoding:NSUTF8StringEncoding];
    [[NSFileManager defaultManager] createFileAtPath:filePath contents:data attributes:nil];
    //发送到服务器
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>当应用发生闪退的时候，我们就可以查看收集到的崩溃日志的信息，然后在分析定位出问题所在然后解决。</p> <h2 id="在发生崩溃的设备中获取崩溃日志"><a href="#在发生崩溃的设备中获取崩溃日志" class="header-anchor">#</a> 在发生崩溃的设备中获取崩溃日志</h2> <p>在app闪退的设备上，会自动生成一个崩溃日志(Crash Log)，在iPhone设备上崩溃日志的位置是：<code>var/mobile/Library/Logs/CrashReporter</code>。有以下几种方法可以获取设备上的崩溃日志：</p> <h2 id="通过与itunes-store同步"><a href="#通过与itunes-store同步" class="header-anchor">#</a> 通过与iTunes Store同步</h2> <p>当设备与电脑上的iTunes Store同步后，会将崩溃日志保存到电脑上，可以从电脑中获取到崩溃日志。
macOS上：<code>~/Library/Logs/CrashReporter/MobileDevice/&lt; DEVICE_NAME \&gt;</code>
Windows上： C:/Users/&lt; USERNAME &gt; /AppDataRoamingApple/ComputerLogsCrashReporterMobileDevice/&lt; DEVICE_NAME &gt;
然后在对应的设备目录下面就会有.crash和.ips文件，.crash文件就是我们要找的崩溃日志文件了。</p> <h3 id="通过在xcode上获取"><a href="#通过在xcode上获取" class="header-anchor">#</a> 通过在Xcode上获取</h3> <p>可以通过将设备与装有Xcode的电脑连接，然后打开Xcode，通过在Xcode-&gt;Window-&gt;Devices，然后选中真机设备，点击View Device Logs即可查看真机里面的日志，还可以把日志下载下来。
<image alt="Xcode获取真机日志" src="/images/xcode-device-crash.png" width="500" heigh="400"></image>
点开之后可以选择相关的.crash文件，查看崩溃信息，也可以把日志文件导出来再打开查看。
我们还可以在xcode上实时地获取当前连接设备的输出日志，可以边操作我们的app，如果发生了闪退之类的异常，都会在输入的日志信息获取到。一般输出的信息比较多，比较快，我们可以点击右下角的保存按钮，把信息保存起来，然后再查看分析。
<image alt="获取设备输出信息" src="/images/获取真机输出信息.png" width="500" heigh="400"></image></p> <h3 id="使用itunes-connect获取"><a href="#使用itunes-connect获取" class="header-anchor">#</a> 使用iTunes Connect获取</h3> <p>当你的应用提交到App Store上后，你也可以从iTunes Connect中获取用户的崩溃日志。在位置<code>Manage Your Applications -&gt; View Details -&gt; Crash Reports</code>。有个前提就是，用户设备同意上传相关信息，打开了诊断与用量这个选项设置-&gt;隐私-&gt;<code>诊断与用量</code>。</p> <h2 id="符号化crash-log文件"><a href="#符号化crash-log文件" class="header-anchor">#</a> 符号化crash log文件</h2> <p>当我们将.crash或.ips文件用文本编辑器打开的时候，会发现它里面是一堆十六进制的内存地址，发现根本就看不懂。这时我们就需要将十六进制地址转换为方法名称和行数，这个过程就叫<code>符号化(Symbolication)</code>。
如果在测试设备上发现闪退，可以直接将设备连接到装有Xcode的Mac电脑上，然后在Xcode的Device Log中就可以查看crash文件了，还可以像在Xcode中一样，查看app运行时输入的信息。</p> <h3 id="使用xcode符号化crash-log文件"><a href="#使用xcode符号化crash-log文件" class="header-anchor">#</a> 使用Xcode符号化crash log文件</h3> <p>使用Xcode来符号化崩溃日志文件是最容易的一种方法了。如果是自己的Xcode里面Archive出来的，只需把crash文件拖到Xcode的device log里面就可以了，Xcdoe会自动检测是否有匹配的.dSYM文件和应用二进制文件。
如果不是自己的Xcode里面Archive出来的，或者是在新电脑上来进行符号化，我们只需准备3个文件，相匹配的<code>.dSYM文件</code>和<code>应用二进制文件</code>已经我们获取到的<code>.crash文件</code>。应用二进制文件就是appName.app文件，将ipa文件后缀改为.zip，然后解压，在Payload目录里面有个appName.app文件就是了。把这三个文件放到同一目录，然后把.crash文件拖到或导入到Xcode的device log中即可看到符号化后的详细log信息了。</p> <h3 id="命令行工具symbolicatecrash"><a href="#命令行工具symbolicatecrash" class="header-anchor">#</a> 命令行工具symbolicatecrash</h3> <p>还可以使用命令行工具symbolicatecrash来手动符号化crash文件。仍然需要将.crash文件、.dSYM文件和.app文件放到同一目录下。然后打开终端输入命令：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">DEVELOPER_DIR</span><span class="token operator">=</span>/Applications/Xcode.app/Contents/Developr
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后再输入命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/
Library/PrivateFrameworks/DTDeviceKitBase.framework/Versions/A/Resources/
symbolicatecrash appName.crash appName.app &gt; appName.log 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行完命令后，符号化的crash log就保存在了appName.log文件中去了。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> $./symbolicatecrash iExOA_origin_log.crash xxx.app.dSYM &gt; sym_log.crash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="崩溃日志实例分析"><a href="#崩溃日志实例分析" class="header-anchor">#</a> 崩溃日志实例分析</h2> <p>对crash log进行符号化之后就可以对它进行分析了。先来看下整体的一个crash文件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//设备的信息
Incident Identifier: 3AD82A7D-89CB-48EE-8E4E-29FAF7E4489E
CrashReporter Key:   61684eaed7f1e2c6b4b187d34f325ca24eaf9472
Hardware Model:      iPhone7,2
Process:             **** [444]
Path:                /private/var/containers/Bundle/Application/0963B9B8-DFD9-418C-A249-8ACDBA27ADB5/
Identifier:          com.*****.******
Version:             1.2.417 (35817)
Code Type:           ARM-64 (Native)
Role:                Foreground
Parent Process:      launchd [1]
Coalition:           com.*****.****** [435]

Date/Time:           2016-11-15 15:03:14.3749 +0800
Launch Time:         2016-11-15 14:44:06.3707 +0800
OS Version:          iPhone OS 10.1 (14B72)
Report Version:      104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Exception Note:  EXC_CORPSE_NOTIFY
Triggered by Thread:  0

Application Specific Information:
abort() called

Filtered syslog:
None found

Last Exception Backtrace:
0   CoreFoundation                	0x18aabe1c0 __exceptionPreprocess + 124
1   libobjc.A.dylib               	0x1894f855c objc_exception_throw + 56
2   CoreFoundation                	0x18aabe094 +[NSException raise:format:arguments:] + 104
3   Foundation                    	0x18b54b79c -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 112
4   UIKit                         	0x190afb01c -[UITableView _endCellAnimationsWithContext:] + 14044
5   UIKit                         	0x190b14240 -[UITableView _updateRowsAtIndexPaths:updateAction:withRowAnimation:] + 360
6   xxxx                         	0x1006ae858 0x1000bc000 + 6236248
7   xxxx                         	0x1006a6f80 0x1000bc000 + 6205312
8   xxxx                         	0x1006b38dc 0x1000bc000 + 6256860
9   xxxx                         	0x1001a70d8 0x1000bc000 + 962776
10  xxxx                        	0x1001b9c64 0x1000bc000 + 1039460
11  Foundation                    	0x18b5a765c __NSThreadPerformPerform + 340
12  CoreFoundation                	0x18aa6c278 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24
13  CoreFoundation                	0x18aa6bbc0 __CFRunLoopDoSources0 + 524
14  CoreFoundation                	0x18aa697c0 __CFRunLoopRun + 804
15  CoreFoundation                	0x18a998048 CFRunLoopRunSpecific + 444
16  GraphicsServices              	0x18c41e198 GSEventRunModal + 180
17  UIKit                         	0x1909832fc -[UIApplication _run] + 684
18  UIKit                         	0x19097e034 UIApplicationMain + 208
19  xxxx                         	0x100176ec4 0x1000bc000 + 765636
20  libdyld.dylib                 	0x18997c5b8 start + 4

//崩溃线程的信息
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib        	0x0000000189a8e014 __pthread_kill + 8
1   libsystem_pthread.dylib       	0x0000000189b56450 pthread_kill + 112
2   libsystem_c.dylib             	0x0000000189a0247c __abort + 144
3   libsystem_c.dylib             	0x0000000189a023ec __abort + 0
4   libc++abi.dylib               	0x00000001894cd2d4 __cxa_bad_cast + 0
5   libc++abi.dylib               	0x00000001894eacc0 default_unexpected_handler() + 0
6   libobjc.A.dylib               	0x00000001894f8844 _objc_terminate() + 124
7   libc++abi.dylib               	0x00000001894e766c std::__terminate(void (*)()) + 16
8   libc++abi.dylib               	0x00000001894e7234 __cxa_rethrow + 144
9   libobjc.A.dylib               	0x00000001894f871c objc_exception_rethrow + 44
10  CoreFoundation                	0x000000018a9980bc CFRunLoopRunSpecific + 560
11  GraphicsServices              	0x000000018c41e198 GSEventRunModal + 180
12  UIKit                         	0x00000001909832fc -[UIApplication _run] + 684
13  UIKit                         	0x000000019097e034 UIApplicationMain + 208
14  xxxx                        	0x0000000100176ec4 0x1000bc000 + 765636
15  libdyld.dylib                 	0x000000018997c5b8 start + 4

Thread 1:
0   libsystem_kernel.dylib        	0x0000000189a8ea88 __workq_kernreturn + 8
1   libsystem_pthread.dylib       	0x0000000189b52178 _pthread_wqthread + 968
2   libsystem_pthread.dylib       	0x0000000189b51da4 start_wqthread + 4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><p>包含设备信息、线程信息、异常信息。
//待后续更新</p> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <ol><li><a href="https://developer.apple.com/library/content/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-INTRODUCTION" target="_blank" rel="noopener noreferrer">苹果官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cocoachina.com/industry/20130725/6677.html" target="_blank" rel="noopener noreferrer">iOS应用崩溃日志分析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div></div></div>
    <script src="/assets/js/app.47e4b453.js" defer></script><script src="/assets/js/3.fee66f70.js" defer></script><script src="/assets/js/1.2e349676.js" defer></script><script src="/assets/js/25.e0831a03.js" defer></script>
  </body>
</html>
